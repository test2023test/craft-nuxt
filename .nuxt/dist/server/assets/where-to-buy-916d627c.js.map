{"version":3,"file":"where-to-buy-916d627c.js","sources":["../../../../node_modules/nuxt/dist/app/components/client-only.js","../../../../pages/where-to-buy.vue"],"sourcesContent":["import { createElementBlock, createElementVNode, defineComponent, h, mergeProps, onMounted, ref } from \"vue\";\nexport default defineComponent({\n  name: \"ClientOnly\",\n  inheritAttrs: false,\n  // eslint-disable-next-line vue/require-prop-types\n  props: [\"fallback\", \"placeholder\", \"placeholderTag\", \"fallbackTag\"],\n  setup(_, { slots, attrs }) {\n    const mounted = ref(false);\n    onMounted(() => {\n      mounted.value = true;\n    });\n    return (props) => {\n      if (mounted.value) {\n        return slots.default?.();\n      }\n      const slot = slots.fallback || slots.placeholder;\n      if (slot) {\n        return slot();\n      }\n      const fallbackStr = props.fallback || props.placeholder || \"\";\n      const fallbackTag = props.fallbackTag || props.placeholderTag || \"span\";\n      return createElementBlock(fallbackTag, attrs, fallbackStr);\n    };\n  }\n});\nconst cache = /* @__PURE__ */ new WeakMap();\n/*! @__NO_SIDE_EFFECTS__ */\n// @__NO_SIDE_EFFECTS__\nexport function createClientOnly(component) {\n  if (cache.has(component)) {\n    return cache.get(component);\n  }\n  const clone = { ...component };\n  if (clone.render) {\n    clone.render = (ctx, ...args) => {\n      if (ctx.mounted$) {\n        const res = component.render?.bind(ctx)(ctx, ...args);\n        return res.children === null || typeof res.children === \"string\" ? createElementVNode(res.type, res.props, res.children, res.patchFlag, res.dynamicProps, res.shapeFlag) : h(res);\n      } else {\n        return h(\"div\", mergeProps(ctx.$attrs ?? ctx._.attrs, { key: \"placeholder-key\" }));\n      }\n    };\n  } else if (clone.template) {\n    clone.template = `\n      <template v-if=\"mounted$\">${component.template}</template>\n      <template v-else><div></div></template>\n    `;\n  }\n  clone.setup = (props, ctx) => {\n    const mounted$ = ref(false);\n    onMounted(() => {\n      mounted$.value = true;\n    });\n    return Promise.resolve(component.setup?.(props, ctx) || {}).then((setupState) => {\n      return typeof setupState !== \"function\" ? { ...setupState, mounted$ } : (...args) => {\n        if (mounted$.value) {\n          const res = setupState(...args);\n          return res.children === null || typeof res.children === \"string\" ? createElementVNode(res.type, res.props, res.children, res.patchFlag, res.dynamicProps, res.shapeFlag) : h(res);\n        } else {\n          return h(\"div\", mergeProps(ctx.attrs, { key: \"placeholder-key\" }));\n        }\n      };\n    });\n  };\n  cache.set(component, clone);\n  return clone;\n}\n","<template>\n\t<main class=\"main\">\n\t\t<section class=\"section-where-buy\">\n\t\t\t<div class=\"container\">\n\t\t\t\t<h1 class=\"section-where-buy__title\">Гдe купить?</h1>\n\t\t\t\t<div class=\"section-where-buy__content\">\n\t\t\t\t\t<div class=\"section-where-buy__button-col\">\n\t\t\t\t\t\t<div class=\"section-where-buy__button-scroll-container\">\n\t\t\t\t\t\t\t<div class=\"dropdown dropdown--where-to-buy section-where-buy__dropdown show-desktop\">\n\t\t\t\t\t\t\t\t<div class=\"dropdown__value-box\">\n\t\t\t\t\t\t\t\t\t<input class=\"dropdown__value\" type=\"text\" placeholder=\"Выберите свой город\" disabled :value=\"activeCity.name\">\n\t\t\t\t\t\t\t\t\t<svg class=\"dropdown__arrow\">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href=\"#dropdown-arrow\"></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<ul class=\"dropdown__options-list\">\n\t\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\t\tclass=\"dropdown__option\" \n\t\t\t\t\t\t\t\t\t\tv-for=\"city of cities\"\n\t\t\t\t\t\t\t\t\t\t:data-value=\"city.name\"\n\t\t\t\t\t\t\t\t\t\t@click=\"selectActiveCity(city)\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{city.name}}\n\t\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!-- Button-->\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"section-where-buy__button section-where-buy__button--block\"\n\t\t\t\t\t\t\t\t:class=\"{'section-where-buy__button--orange': activePoint.id === point.id}\"\n\t\t\t\t\t\t\t\tv-for=\"point of pointsList\"\n\t\t\t\t\t\t\t\t@click=\"setActivePoint(point)\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"section-where-buy__button-text-box\">\n\t\t\t\t\t\t\t\t\t<p class=\"section-where-buy__button-text\">{{point.name}}</p>\n\t\t\t\t\t\t\t\t\t<address class=\"section-where-buy__button-addr\">\n\t\t\t\t\t\t\t\t\t\t<svg class=\"section-where-buy__button-addr-icon\">\n\t\t\t\t\t\t\t\t\t\t\t<use xlink:href=\"#map-marker\"></use>\n\t\t\t\t\t\t\t\t\t\t</svg> {{point.address}}\n\t\t\t\t\t\t\t\t\t</address>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<svg class=\"section-where-buy__button-icon\">\n\t\t\t\t\t\t\t\t\t<use xlink:href=\"#chevron-right\"></use>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"section-where-buy__map-col\">\n\t\t\t\t\t\t<div class=\"dropdown dropdown--where-to-buy section-where-buy__dropdown hide-desktop\">\n\t\t\t\t\t\t\t<div class=\"dropdown__value-box\">\n\t\t\t\t\t\t\t\t\t<input class=\"dropdown__value\" type=\"text\" placeholder=\"Выберите свой город\" disabled :value=\"activeCity.name\">\n\t\t\t\t\t\t\t\t\t<svg class=\"dropdown__arrow\">\n\t\t\t\t\t\t\t\t\t\t<use xlink:href=\"#dropdown-arrow\"></use>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<ul class=\"dropdown__options-list\">\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tclass=\"dropdown__option\" \n\t\t\t\t\t\t\t\t\tv-for=\"city of cities\"\n\t\t\t\t\t\t\t\t\t:data-value=\"city.name\"\n\t\t\t\t\t\t\t\t\t@click=\"selectActiveCity(city)\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{city.name}}\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ClientOnly>\n\t\t\t\t\t\t\t<YaMap class=\"section-where-buy__map\" :point=\"activePoint\" ref=\"yamap\" />\n\t\t\t\t\t\t</ClientOnly>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</section>\n\t</main>\n</template>\n<script setup>\n\timport {ref, onMounted} from 'vue';\n\tconst runtimeConfig = useRuntimeConfig();\n\tlet cities = ref([]),\n\t\tactiveCity = ref({}),\n\t\tactivePoint = ref({}),\n\t\tpointsList = ref([]),\n\t\tyamap = ref(null);\n\n\tonMounted(()=>{\n\t\tfetchCities();\n\t\tfetchCarrentCity();\n\t});\n\tfunction setActivePoint(newPoint)\n\t{\n\t\tactivePoint.value = newPoint;\n\t\tsetTimeout(()=>{yamap.value.init()},100)\n\t}\n\tasync function selectActiveCity(newCity){\n\t\tactiveCity.value = newCity;\n\t\tawait fetchPoints();\n\t\tsetActivePoint(pointsList.value[0]);\n\t}\n\tasync function fetchPoints(){\n\t\tawait fetch( runtimeConfig.public.API_BASE_URL + `/sale-points/${activeCity.value.id}/`)\n\t\t\t.then(async (response)=>{\n\t\t\t\tlet dataJson = await response.json();\n\t\t\t\tpointsList.value = dataJson['sales-points'];\n\t\t\t})\n\t}\n\tfunction fetchCities(){\n\t\tfetch( runtimeConfig.public.API_BASE_URL + '/cities/').then(async (response)=>{\n\t\t\tlet dataJson = await response.json();\n\t\t\tcities.value = dataJson.cities;\n\t\t})\n\t}\n\tfunction fetchCarrentCity(){\n\t\t\n\t\tfetch(runtimeConfig.public.API_BASE_URL + '/current-city/').then(async (response)=>{\n\t\t\tlet dataJson = await response.json();\n\t\t\tif(dataJson.success)\n\t\t\t\tselectActiveCity(dataJson.currentCity)\n\t\t})\n\t}\n</script>\n<style >\n\t.section-where-buy__map{width: 100%;}\n\t@media(min-width: 1024px)\n\t{\n\t\t.section-where-buy__button-scroll-container{min-height: 100%;}\n\t}\n</style>\n"],"names":[],"mappings":";;;;;;AACA,MAAe,qDAAgB;AAAA,EAC7B,MAAM;AAAA,EACN,cAAc;AAAA;AAAA,EAEd,OAAO,CAAC,YAAY,eAAe,kBAAkB,aAAa;AAAA,EAClE,MAAM,GAAG,EAAE,OAAO,MAAK,GAAI;AACzB,UAAM,UAAU,IAAI,KAAK;AAIzB,WAAO,CAAC,UAAU;;AAChB,UAAI,QAAQ,OAAO;AACjB,gBAAO,WAAM,YAAN;AAAA,MACR;AACD,YAAM,OAAO,MAAM,YAAY,MAAM;AACrC,UAAI,MAAM;AACR,eAAO,KAAI;AAAA,MACZ;AACD,YAAM,cAAc,MAAM,YAAY,MAAM,eAAe;AAC3D,YAAM,cAAc,MAAM,eAAe,MAAM,kBAAkB;AACjE,aAAO,mBAAmB,aAAa,OAAO,WAAW;AAAA,IAC/D;AAAA,EACG;AACH,CAAC;;;;;;ACuDG,QAAC,SAAS,IAAI,CAAA,CAAE,GAClB,aAAa,IAAI,CAAA,CAAE,GACnB,cAAc,IAAI,CAAA,CAAE,GACpB,aAAa,IAAI,CAAA,CAAE;AACX,QAAI,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;","x_google_ignoreList":[0]}