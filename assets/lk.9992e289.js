import{s as k}from"./modal.2f64c84b.js";import{o as e,c as a,a as t,b as x,w as I,F as l,i as $,t as r,k as p,T as M,d as i,r as v,g as f,j as u,h as C,l as y,f as N,n as w}from"./entry.f9d10e7e.js";import{_ as P}from"./_plugin-vue_export-helper.c27b6911.js";import{s as S,_ as D}from"./BasicLotterySection.2290c2ee.js";const O={data:()=>({page:1,countOnPage:5,isListEnd:!1}),mounted(){this.fetchCodes()},methods:{async fetchCodes(){await this.$store.dispatch("user/fetchActiveCodeList",{page:this.page,countOnPage:this.countOnPage})},async loadMoreCode(){this.countOnPage+=5,await this.fetchCodes(),this.isListEnd=!(this.countOnPage<=this.$store.state.user.activeCodeList.length)},showModal:k}},T={class:"data-card"},L={class:"data-card__title-box"},U=t("h2",{class:"data-card__title"},"Мои коды",-1),E=t("svg",{class:"button__icon"},[t("use",{"xlink:href":"#plus"})],-1),z=[E],A={class:"data-card__text-box"},B=t("time",{class:"data-card__time"},"08.07.2023",-1),V={class:"data-card__code"},F={key:0,class:"data-card__status"},W={key:1,class:"data-card__status"},H={key:2,class:"data-card__status data-card__status--green"},G={key:0,class:"data-card__button-box"},R=t("svg",{class:"button__icon"},[t("use",{"xlink:href":"#refresh"})],-1);function q(m,c,d,_,g,n){return e(),a("div",T,[t("div",L,[U,t("button",{class:"button button--orange button--orange-xs data-card__desktop-btn",onClick:c[0]||(c[0]=s=>n.showModal("code"))},"Зарегистрировать код"),t("button",{class:"button button--orange button--orange-xs button--icon-only data-card__mobile-btn",onClick:c[1]||(c[1]=s=>n.showModal("code"))},z)]),x(M,{name:"code-list"},{default:I(()=>[(e(!0),a(l,null,$(m.$store.state.user.activeCodeList,(s,o)=>(e(),a("div",{class:"data-card__row",key:o},[t("div",A,[B,t("span",V,r(s.code_content),1)]),s.status==="duplicate"?(e(),a("span",F,"Дубликат")):p("",!0),s.status==="wrong_code"?(e(),a("span",W,"Неверный код")):p("",!0),s.status==="success"?(e(),a("span",H,"Одобрен")):p("",!0)]))),128))]),_:1}),m.isListEnd?p("",!0):(e(),a("div",G,[t("button",{class:"button button--outline-orange data-card__more-button",onClick:c[2]||(c[2]=(...s)=>n.loadMoreCode&&n.loadMoreCode(...s))},[i("Показать еще "),R])]))])}const J=P(O,[["render",q]]);const K={class:"data-card"},Q=t("div",{class:"data-card__title-box"},[t("h2",{class:"data-card__title"},"Мои призы")],-1),X={class:"data-card__text-box"},Y=t("time",{class:"data-card__time"},"08.07.2023",-1),Z={class:"data-card__text"},tt={class:"data-card__text"},st={class:"data-card__button-box"},et=t("svg",{class:"button__icon"},[t("use",{"xlink:href":"#refresh"})],-1),at={__name:"UserWinCard",setup(m){let c=v(2),d=v([]),_=v(!1);f(()=>{g()});async function g(){await fetch(`https://promo-orenbeer.dreamdev.space/user-lottery-results/?token=${localStorage.getItem("userToken")}&page=1&per_page=${c.value}`).then(async s=>{let o=await s.json();d.value=o.userLotteryResults})}async function n(){c.value+=1,await g(),_.value=c.value<=d.value.length}return(s,o)=>(e(),a("div",K,[Q,x(M,{name:"win-list",tag:"ul"},{default:I(()=>[(e(!0),a(l,null,$(u(d),(h,b)=>(e(),a("div",{class:"data-card__row",key:b},[t("div",X,[Y,t("span",Z,[h.lotteryType==="instant"?(e(),a(l,{key:0},[i(" Мгновенный приз ")],64)):p("",!0),h.lotteryType==="basic"?(e(),a(l,{key:1},[i(" Обычная лотерея ")],64)):p("",!0),h.lotteryType==="collection"?(e(),a(l,{key:2},[i(" Коллекция стикеров ")],64)):p("",!0)])]),t("span",tt,r(h.prizeName),1)]))),128))]),_:1}),t("div",st,[u(_)?p("",!0):(e(),a("button",{key:0,class:"button button--outline-orange data-card__more-button",onClick:n},[i(" Показать еще "),et]))])]))}},ct=at,nt={class:"data-card"},ot={class:"data-card__title-box"},it=t("h2",{class:"data-card__title"},"Мои данные",-1),_t=t("svg",{class:"button__icon"},[t("use",{"xlink:href":"#pencil"})],-1),rt=t("svg",{class:"button__icon"},[t("use",{"xlink:href":"#pencil"})],-1),dt=[rt],lt={class:"data-card__name"},ut={class:"data-card__birthday"},pt={class:"data-card__contacts"},ht=t("svg",{class:"data-card__contacts-icon"},[t("use",{"xlink:href":"#phone"})],-1),mt={class:"data-card__contacts"},gt=t("svg",{class:"data-card__contacts-icon"},[t("use",{"xlink:href":"#envelope"})],-1),xt={key:0,class:"data-card__info-box"},bt=N('<p class="data-card__info-text-big"> Получите +50 баллов <br class="show-desktop">за подтверждение e-mail </p><p class="data-card__info-text">Получите +50 баллов за подтверждение e-mail</p><p class="data-card__info-text-small"> Для этого необходимо перейти по ссылке из письма. Если вы не получали письмо, то <a class="text-orange" href="#">запросите его ещё раз.</a></p>',3),kt=[bt],$t={class:"data-card__score-row"},ft={class:"data-card__score"},vt={class:"data-card__score-value"},yt={class:"data-card__score"},wt={class:"data-card__score-value"},Ct={__name:"UserDataCard",setup(m){const c=C(),d=y(()=>{var s,o;return((s=c.state.user.data)==null?void 0:s.firstName)===""?"Имя":(o=c.state.user.data)==null?void 0:o.firstName}),_=y(()=>{var s,o;return((s=c.state.user.data)==null?void 0:s.lastName)===""?"Фамилия":(o=c.state.user.data)==null?void 0:o.lastName}),g=y(()=>{if(c.state.user.data.phone){let s=c.state.user.data.phone.split("");return`+${s[0]} ${s[1]}${s[2]}${s[3]} ${s[4]}${s[5]}${s[6]} ${s[7]}${s[8]} ${s[9]}${s[10]}`}else return"-"});f(()=>{c.dispatch("user/getSticker")});function n(){k("user"),c.state.modal.getDataFunc()}return(s,o)=>(e(),a("div",nt,[t("div",ot,[it,t("button",{class:"button button--outline-orange data-card__desktop-btn",onClick:n},[i("Редактировать "),_t]),t("button",{onClick:o[0]||(o[0]=h=>u(k)("code")),class:"button button--outline-orange button--icon-only data-card__mobile-btn","aria-label":"Edit"},dt)]),t("p",lt,r(d.value)+" "+r(_.value),1),t("p",ut," Дата рождения: "+r(u(c).state.user.data.dateOfBirth),1),t("p",pt,[ht,i(r(g.value),1)]),t("p",mt,[gt,i(" "+r(u(c).state.user.data.email),1)]),u(c).state.user.data.isConfirmedEmail?p("",!0):(e(),a("div",xt,kt)),t("div",$t,[t("p",ft,[t("span",vt,r(u(c).state.user.data.loyalty_points),1),i("Баллов")]),t("p",yt,[t("span",wt,r(u(c).getters["user/getStikerCount"]),1),i("Стикеров")])])]))}},St=Ct,j=[{title:"Мини пивоварня",subtitle:'Соберите 4 коллекционных стикера и участвуйте в розыгрыше <span class="text-orange">30 ЛИТРОВ</span> пива',countOfParticipants:'Сейчас участвует: <span class="section-dashboard__players-counter">1020</span> человек',status:"Соберите все 4 стикера для участия",isActive:!1,items:[{srcset:"/images/sticker1@1x.webp, /images/sticker1@2x.webp 2x",srcImg:"images/sticker1@2x.jpg 2x"},{srcset:"/images/sticker2@1x.webp, /images/sticker2@2x.webp 2x",srcImg:"images/sticker2@2x.jpg 2x"},{srcset:"/images/sticker3@1x.webp, /images/sticker3@2x.webp 2x",srcImg:"images/sticker3@2x.jpg 2x"},{srcset:"/images/sticker4@1x.webp, /images/sticker4@2x.webp 2x",srcImg:"images/sticker4@2x.jpg 2x"}]},{title:"Варочный цех",subtitle:'Cоберите 4 коллекционных стикера и участвуйте в розыгрыше <span class="text-orange">45 ЛИТРОВ</span> пива',countOfParticipants:'Сейчас участвует: <span class="section-dashboard__players-counter">1020</span> человек',status:"Вы участвуйте",isActive:!0,items:[{srcset:"/images/sticker5@1x.webp, /images/sticker5@2x.webp 2x",srcImg:"images/sticker5@2x.jpg 2x"},{srcset:"/images/sticker6@1x.webp, /images/sticker6@2x.webp 2x",srcImg:"images/sticker6@2x.jpg 2x"},{srcset:"/images/sticker7@1x.webp, /images/sticker7@2x.webp 2x",srcImg:"images/sticker7@2x.jpg 2x"},{srcset:"/images/sticker8@1x.webp, /images/sticker8@2x.webp 2x",srcImg:"images/sticker8@2x.jpg 2x"}]},{title:"Цех розлива пива",subtitle:'Соберите 4 коллекционных стикера и участвуйте в розыгрыше <span class="text-orange">60 ЛИТРОВ</span> пива',countOfParticipants:'Сейчас участвует: <span class="section-dashboard__players-counter">1020</span> человек',status:"Соберите все 4 стикера для участия",isActive:!1,items:[{srcset:"/images/sticker9@1x.webp, /images/sticker9@2x.webp 2x",srcImg:"images/sticker9@2x.jpg 2x"},{srcset:"/images/sticker10@1x.webp, /images/sticker10@2x.webp 2x",srcImg:"images/sticker10@2x.jpg 2x"},{srcset:"/images/sticker11@1x.webp, /images/sticker11@2x.webp 2x",srcImg:"images/sticker11@2x.jpg 2x"},{srcset:"/images/sticker12@1x.webp, /images/sticker12@2x.webp 2x",srcImg:"images/sticker12@2x.jpg 2x"}]}],jt={class:"section-dashboard container"},It=t("h2",{class:"section-dashboard__title"},[t("span",{class:"text-orange"},"Регистрируйте больше кодов"),i(","),t("br"),i("получайте стикеры и баллы, выигрывайте призы")],-1),Mt={class:"section-dashboard__grid"},Nt={class:"section-dashboard__col"},Pt={class:"section-dashboard__col-title"},Dt=["innerHTML"],Ot={class:"section-dashboard__players"},Tt={class:"section-dashboard__players-counter"},Lt={class:"section-dashboard__col-grid"},Ut=["onClick"],Et=["srcset"],zt=["src","srcset"],At={class:"sticker__text"},Bt={key:0,class:"sticker__counter"},Vt={key:0,class:"section-dashboard__col-status-icon"},Ft=t("use",{"xlink:href":"#thumbs-up"},null,-1),Wt=[Ft],Ht={__name:"StikersSection",setup(m){const c=C();f(()=>{c.dispatch("lottery/fetchCollectionLottery")});function d(_){_.activatedCount&&(c.commit("modal/setStickerData",_),k("sticker"))}return(_,g)=>(e(),a("section",jt,[It,t("div",Mt,[(e(!0),a(l,null,$(_.$store.state.lottery.collection,(n,s)=>(e(),a("div",Nt,[t("h3",Pt,r(n.name),1),t("p",{class:"section-dashboard__col-text",innerHTML:n.description},null,8,Dt),t("p",Ot,[i(" Сейчас участвует: "),t("span",Tt,r(n.participantCount),1),n.participantCount>1&&n.participantCount<5?(e(),a(l,{key:0},[i(" человека ")],64)):(e(),a(l,{key:1},[i(" человек ")],64))]),t("div",Lt,[(e(!0),a(l,null,$(n.stickers,(o,h)=>(e(),a("figure",{onClick:b=>d(o),class:w(["sticker",{"sticker--disabled":!o.activatedCount}])},[t("picture",null,[t("source",{srcset:u(j)[s].items[h].srcset,type:"image/webp"},null,8,Et),t("img",{class:"sticker__img",src:o.iconUrl,srcset:u(j)[s].items[h].srcImg,alt:""},null,8,zt)]),t("figcaption",null,[t("p",At,r(o.name),1),o.activatedCount?(e(),a("span",Bt,r(o.activatedCount),1)):p("",!0)])],10,Ut))),256))]),t("p",{class:w(["section-dashboard__col-status",{"section-dashboard__col-status--green":n.isParticipant}])},[n.isParticipant?(e(),a("svg",Vt,Wt)):p("",!0),n.isParticipant?(e(),a(l,{key:2},[i(" Вы участвуйте ")],64)):(e(),a(l,{key:1},[i(" Соберите все 4 стикера для участия ")],64))],2)]))),256))])]))}},Gt=Ht,Rt={class:"section-instant section-instant--lk container"},qt={class:"section-instant__content-box"},Jt=N('<h2 class="section-instant__title"><svg class="section-instant__title-icon"><use xlink:href="#lightning"></use></svg>Мгновенные призы </h2><p class="section-instant__text"><span class="text-orange">ПОКУПАЙТЕ БОЛЬШЕ</span> продукции и получите шанс выиграть мгновенные призы </p>',2),Kt={class:"swiper section-instant__slider-elem"},Qt={class:"swiper-wrapper section-instant__grid"},Xt={class:"section-instant__grid-col swiper-slide"},Yt=["onClick"],Zt={class:"instant-card__img-box"},ts=["srcset"],ss=["src","srcset"],es={class:"instant-card__text"},as={key:0,class:"instant-card__counter"},cs={__name:"InstantSection",setup(m){const c=C();f(()=>{c.dispatch("lottery/fetchInstantLottery")});function d(_){_.isParticipant&&(c.commit("modal/setStickerData",_.stickers[0]),k("sticker"))}return(_,g)=>(e(),a("section",Rt,[t("div",qt,[Jt,t("div",Kt,[t("div",Qt,[(e(!0),a(l,null,$(_.$store.state.lottery.instant,(n,s)=>(e(),a("div",Xt,[t("figure",{class:w(["instant-card instant-card--bg1",{"instant-card--disabled":!n.isParticipant}]),onClick:o=>d(n)},[t("div",Zt,[t("picture",null,[t("source",{srcset:u(S)[s].srcset,type:"image/webp"},null,8,ts),t("img",{class:"instant-card__img",src:n.stickers[0].iconUrl,srcset:u(S)[s].imgSrcset,alt:""},null,8,ss)])]),t("figcaption",es,[i(r(n.name)+" ",1),n.activatedCount?(e(),a("span",as,r(n.activatedCount),1)):p("",!0)])],10,Yt)]))),256))])])])]))}},ns=cs,os={},is={class:"main"},_s={class:"section-data"},rs={class:"container"},ds=t("h1",{class:"section-data__title"},"Личный кабинет",-1),ls={class:"section-data__grid"},us=t("section",{class:"section-instant-prizes container"},[t("h2",{class:"section-instant-prizes__title"}),t("p",{class:"section-instant-prizes__text"}),t("div",{class:"section-instant-prizes__grid"})],-1),ps={class:"section-lk-text container"},hs={key:0,class:"section-lk-text__text"},ms={key:1,class:"section-lk-text__text"},gs=t("p",{class:"section-lk-text__text"},[i(" Если остались вопросы — "),t("span",{class:"text-orange"},"напишите нам"),i(". ")],-1);function xs(m,c){var h,b;const d=J,_=ct,g=St,n=Gt,s=ns,o=D;return e(),a("main",is,[t("section",_s,[t("div",rs,[ds,t("div",ls,[x(d),x(_),x(g)])])]),x(n),x(s),x(o,{isLk:""}),us,t("section",ps,[(h=m.$store.state.user.data)!=null&&h.firstName?(e(),a("h2",hs,r((b=m.$store.state.user.data)==null?void 0:b.firstName)+", желаем вам удачи!",1)):(e(),a("h2",ms,"Желаем вам удачи!")),gs])])}const vs=P(os,[["render",xs]]);export{vs as default};
