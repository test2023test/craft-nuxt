import{o as c,c as i,a as e,m as B,r as u,q as x,g as d,F as b,s as y,b as k,w as M,x as P,t as v,y as Y,d as L}from"./entry.75f30551.js";import{_ as S}from"./_plugin-vue_export-helper.c27b6911.js";const j={props:{point:{type:Object,default:[]}},methods:{init(){YaMap.map.destroy(),YaMap.init({setting:{center:[+this.point.lat,+this.point.lon],zoom:7}}),YaMap.addPoint([+this.point.lat,+this.point.lon])}},mounted(){ymaps.ready(()=>YaMap.init({}))}},E=e("div",{class:"section-where-buy__map",id:"map",style:{height:"400px",width:"100%"}},null,-1),R=[E];function I(f,n,r,s,a,_){return c(),i("div",null,R)}const J=S(j,[["render",I]]),N=B({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(f,{slots:n,attrs:r}){const s=u(!1);return x(()=>{s.value=!0}),a=>{var h;if(s.value)return(h=n.default)==null?void 0:h.call(n);const _=n.fallback||n.placeholder;if(_)return _();const p=a.fallback||a.placeholder||"",w=a.fallbackTag||a.placeholderTag||"span";return i(w,r,p)}}});const O={class:"main"},U={class:"section-where-buy"},V={class:"container"},z=e("h1",{class:"section-where-buy__title"},"Гдe купить?",-1),F={class:"section-where-buy__content"},q={class:"section-where-buy__button-col"},D={class:"section-where-buy__button-scroll-container"},G={class:"dropdown dropdown--where-to-buy section-where-buy__dropdown show-desktop"},H={class:"dropdown__value-box"},K=["value"],Q=e("svg",{class:"dropdown__arrow"},[e("use",{"xlink:href":"#dropdown-arrow"})],-1),W={class:"dropdown__options-list"},X=["data-value","onClick"],Z=["onClick"],ee={class:"section-where-buy__button-text-box"},te={class:"section-where-buy__button-text"},ne={class:"section-where-buy__button-addr"},oe=e("svg",{class:"section-where-buy__button-addr-icon"},[e("use",{"xlink:href":"#map-marker"})],-1),se=e("svg",{class:"section-where-buy__button-icon"},[e("use",{"xlink:href":"#chevron-right"})],-1),ae={class:"section-where-buy__map-col"},ie={class:"dropdown dropdown--where-to-buy section-where-buy__dropdown hide-desktop"},ce={class:"dropdown__value-box"},_e=["value"],le=e("svg",{class:"dropdown__arrow"},[e("use",{"xlink:href":"#dropdown-arrow"})],-1),de={class:"dropdown__options-list"},re=["data-value","onClick"],pe={__name:"where-to-buy",setup(f){const n=P();let r=u([]),s=u({}),a=u({}),_=u([]),p=u(null);x(()=>{C(),$()});function w(o){a.value=o,setTimeout(()=>{p.value.init()},100)}async function h(o){s.value=o,await g(),w(_.value[0])}async function g(){await fetch(n.public.API_BASE_URL+`/sale-points/${s.value.id}/`).then(async o=>{let l=await o.json();_.value=l["sales-points"]})}function C(){fetch(n.public.API_BASE_URL+"/cities/").then(async o=>{let l=await o.json();r.value=l.cities})}function $(){fetch(n.public.API_BASE_URL+"/current-city/").then(async o=>{let l=await o.json();l.success&&(s.value=l.currentCity)})}return(o,l)=>{const A=J,T=N;return c(),i("main",O,[e("section",U,[e("div",V,[z,e("div",F,[e("div",q,[e("div",D,[e("div",G,[e("div",H,[e("input",{class:"dropdown__value",type:"text",placeholder:"Выберите свой город",disabled:"",value:d(s).name},null,8,K),Q]),e("ul",W,[(c(!0),i(b,null,y(d(r),t=>(c(),i("li",{class:"dropdown__option","data-value":t.name,onClick:m=>h(t)},v(t.name),9,X))),256))])]),(c(!0),i(b,null,y(d(_),t=>(c(),i("div",{class:Y(["section-where-buy__button section-where-buy__button--block",{"section-where-buy__button--orange":d(a).id===t.id}]),onClick:m=>w(t)},[e("div",ee,[e("p",te,v(t.name),1),e("address",ne,[oe,L(" "+v(t.address),1)])]),se],10,Z))),256))])]),e("div",ae,[e("div",ie,[e("div",ce,[e("input",{class:"dropdown__value",type:"text",placeholder:"Выберите свой город",disabled:"",value:d(s).name},null,8,_e),le]),e("ul",de,[(c(!0),i(b,null,y(d(r),t=>(c(),i("li",{class:"dropdown__option","data-value":t.name,onClick:m=>h(t)},v(t.name),9,re))),256))])]),k(T,null,{default:M(()=>[k(A,{class:"section-where-buy__map",point:d(a),ref_key:"yamap",ref:p},null,8,["point"])]),_:1})])])])])])}}};export{pe as default};
